{"version":3,"sources":["5/utils.js","5/bouncestrings.js","5/app.js"],"names":["distance","x1","y1","x2","y2","x","y","Math","sqrt","lineCircle","cx","cy","r","lineLength","point","pow","BOUNCE","BounceString","pos","color","middleX","middleY","points","ox","oy","vx","vy","detect","ctx","moveX","moveY","beginPath","fillStyle","arc","PI","fill","strokeStyle","lineWidth","tx","ty","prevX","prevY","moveTo","i","length","quadraticCurveTo","lineTo","stroke","App","canvas","document","getElementById","getContext","pixelRatio","window","devicePixelRatio","strings","isDown","resize","addEventListener","onDown","bind","onMove","onUp","requestAnimationFrame","animate","stageWidth","body","clientWidth","stageHeight","clientHeight","width","height","scale","t","clearRect","e","clientX","clientY","test","navigator","userAgent","onload","app","console","log","isMobile"],"mappings":"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","file":"app.0debe224.js","sourceRoot":"../src","sourcesContent":["export function distance(x1, y1, x2, y2) {\n  const x = x2 - x1;\n  const y = y2 - y1;\n  return Math.sqrt(x * x + y * y);\n}\n\n/**\n *\n */\nexport function lineCircle(x1, y1, x2, y2, cx, cy, r) {\n  const lineLength = distance(x1, y1, x2, y2);\n  //정사영 길이\n  const point =\n    ((cx - x1) * (x2 - x1) + (cy - y1) * (y2 - y1)) / Math.pow(lineLength, 2);\n  const px = x1 + point * (x2 - x1);\n  const py = y1 + point * (y2 - y1);\n\n  if (distance(px, py, cx, cy) < r) {\n    return true;\n  } else {\n    return false;\n  }\n}\n","import { lineCircle } from \"./utils\";\n\nconst BOUNCE = 0.92;\n\nexport class BounceString {\n  /**\n   * pos : {x1, y1, x2, y2}\n   * color : \"colorCode\"\n   */\n  constructor(pos, color) {\n    const middleX = (pos.x2 - pos.x1) / 2 + pos.x1;\n    const middleY = (pos.y2 - pos.y1) / 2 + pos.y1;\n    this.points = [\n      {\n        x: pos.x1,\n        y: pos.y1,\n        ox: pos.x1,\n        oy: pos.y1,\n        vx: 0,\n        vy: 0,\n      },\n      {\n        x: middleX,\n        y: middleY,\n        ox: middleX,\n        oy: middleY,\n        vx: 0,\n        vy: 0,\n      },\n      {\n        x: pos.x2,\n        y: pos.y2,\n        ox: pos.x2,\n        oy: pos.y2,\n        vx: 0,\n        vy: 0,\n      },\n    ];\n\n    this.detect = 20;\n    this.color = color;\n  }\n\n  animate(ctx, moveX, moveY) {\n    ctx.beginPath();\n    ctx.fillStyle = \"#ff00ff\";\n    ctx.arc(moveX, moveY, 60, 0, Math.PI * 2, false);\n    ctx.fill();\n\n    ctx.beginPath();\n    ctx.strokeStyle = this.color;\n    ctx.lineWidth = 4;\n    if (\n      lineCircle(\n        this.points[0].x,\n        this.points[0].y,\n        this.points[2].x,\n        this.points[2].y,\n        moveX,\n        moveY,\n        this.detect\n      )\n    ) {\n      this.detect = 300;\n      let tx = (this.points[1].ox + moveX) / 2;\n      let ty = moveY;\n      this.points[1].vx = tx - this.points[1].x;\n      this.points[1].vy = ty - this.points[1].y;\n    } else {\n      this.detect = 10;\n      let tx = this.points[1].ox;\n      let ty = this.points[1].oy;\n      this.points[1].vx += tx - this.points[1].x;\n      this.points[1].vx *= BOUNCE;\n      this.points[1].vy += ty - this.points[1].y;\n      this.points[1].vy *= BOUNCE;\n    }\n\n    this.points[1].x += this.points[1].vx;\n    this.points[1].y += this.points[1].vy;\n\n    let prevX = this.points[0].x;\n    let prevY = this.points[0].y;\n\n    ctx.moveTo(prevX, prevY);\n\n    for (let i = 0; i < this.points.length; i++) {\n      const cx = (prevX + this.points[i].x) / 2;\n      const cy = (prevY + this.points[i].y) / 2;\n\n      ctx.quadraticCurveTo(prevX, prevY, cx, cy);\n      //   ctx.quadraticCurveTo(prevX, prevY, this.points[i].x, this.points[i].y);\n\n      prevX = this.points[i].x;\n      prevY = this.points[i].y;\n    }\n\n    ctx.lineTo(prevX, prevY);\n    ctx.stroke();\n  }\n}\n","import { BounceString } from \"./bouncestrings\";\n\nclass App {\n  constructor() {\n    this.canvas = document.getElementById(\"app\");\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.pixelRatio = window.devicePixelRatio > 1 ? 2 : 1;\n\n    this.strings = [];\n    this.moveX = -5000;\n    this.moveY = -5000;\n    this.isDown = false;\n\n    this.resize();\n\n    document.addEventListener(\"pointerdown\", this.onDown.bind(this), false);\n    document.addEventListener(\"pointermove\", this.onMove.bind(this), false);\n    document.addEventListener(\"pointerup\", this.onUp.bind(this), false);\n\n    window.addEventListener(\"resize\", this.resize.bind(this), false);\n    window.requestAnimationFrame(this.animate.bind(this));\n  }\n\n  resize() {\n    this.stageWidth = document.body.clientWidth;\n    this.stageHeight = document.body.clientHeight;\n\n    this.canvas.width = this.stageWidth * this.pixelRatio;\n    this.canvas.height = this.stageHeight * this.pixelRatio;\n    this.ctx.scale(this.pixelRatio, this.pixelRatio);\n\n    this.strings = [\n      new BounceString(\n        {\n          x1: 150,\n          y1: this.stageHeight / 2,\n          x2: this.stageWidth - 150,\n          y2: this.stageHeight / 2,\n        },\n        \"#ff5038\"\n      ),\n    ];\n  }\n\n  animate(t) {\n    this.ctx.clearRect(0, 0, this.stageWidth, this.stageHeight);\n\n    if (this.strings.length > 0) {\n      for (let i = 0; i < this.strings.length; i++) {\n        this.strings[i].animate(this.ctx, this.moveX, this.moveY);\n      }\n    }\n\n    window.requestAnimationFrame(this.animate.bind(this));\n  }\n\n  onDown(e) {\n    this.isDown = true;\n    this.moveX = e.clientX;\n    this.moveY = e.clientY;\n  }\n\n  onMove(e) {\n    if (this.isDown) {\n      this.moveX = e.clientX;\n      this.moveY = e.clientY;\n    }\n  }\n\n  onUp(e) {\n    this.isDown = false;\n    this.moveX = -5000;\n    this.moveY = -5000;\n  }\n\n  isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    );\n  }\n}\n\nwindow.onload = () => {\n  const app = new App();\n  console.log(app.isMobile());\n};\n"]}