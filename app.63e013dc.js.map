{"version":3,"sources":["8/app.js"],"names":["App","canvas","document","getElementById","ctx","getContext","stageWidth","Math","min","body","clientWidth","stageHeight","clientHeight","pixelRatio","bgImage","Image","bgX","runSprite","spriteX","spriteY","spriteSpeed","jumpDelta","spriteFrame","spriteMaxFrame","keyDownCodes","load","resize","window","addEventListener","bind","handleKeyDown","handleKeyUp","requestAnimationFrame","animate","src","forest","run","width","height","scale","t","drawImage","targetFrameX","floor","event","code","push","filter","item","length","test","navigator","userAgent","onload","app","console","log","isMobile"],"mappings":";;;;;AAgHA,aAhHA,IAAA,EAAA,EAAA,QAAA,iBACA,EAAA,EAAA,QAAA,cA+GA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EA7GMA,IAAAA,EAAAA,WACU,SAAA,IAAA,EAAA,KAAA,GACPC,KAAAA,OAASC,SAASC,eAAe,OACjCC,KAAAA,IAAM,KAAKH,OAAOI,WAAW,MAC7BC,KAAAA,WAAaC,KAAKC,IAAI,IAAKN,SAASO,KAAKC,aACzCC,KAAAA,YAAcJ,KAAKC,IAAI,IAAKN,SAASO,KAAKG,cAE1CC,KAAAA,WAAa,EAEbC,KAAAA,QAAU,IAAIC,MACdC,KAAAA,IAAM,EACNC,KAAAA,UAAY,IAAIF,MAChBG,KAAAA,SAAW,GACXC,KAAAA,QAAU,KAAKR,YAAc,IAC7BS,KAAAA,YAAc,EACdC,KAAAA,UAAY,EACZC,KAAAA,YAAc,EACdC,KAAAA,eAAiB,EACjBC,KAAAA,aAAe,GAEfC,KAAAA,OACAC,KAAAA,SACLC,OAAOC,iBAAiB,SAAU,KAAKF,OAAOG,KAAK,OAAO,GAC1DF,OAAOC,iBAAiB,UAAW,KAAKE,cAAcD,KAAK,OAAO,GAClEF,OAAOC,iBAAiB,QAAS,KAAKG,YAAYF,KAAK,OAAO,GAC9DF,OAAOK,sBAAsB,KAAKC,QAAQJ,KAAK,OAoFnD,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,OAjFE,MAAA,WACOf,KAAAA,QAAQoB,IAAMC,EAAnB,QACKlB,KAAAA,UAAUiB,IAAME,EAArB,UA+EJ,CAAA,IAAA,SA5EE,MAAA,WACO9B,KAAAA,WAAaC,KAAKC,IAAI,IAAKN,SAASO,KAAKC,aACzCC,KAAAA,YAAcJ,KAAKC,IAAI,IAAKN,SAASO,KAAKG,cAE1CX,KAAAA,OAAOoC,MAAQ,KAAK/B,WAAa,KAAKO,WACtCZ,KAAAA,OAAOqC,OAAS,KAAK3B,YAAc,KAAKE,WACxCT,KAAAA,IAAImC,MAAM,KAAK1B,WAAY,KAAKA,cAsEzC,CAAA,IAAA,UAnEE,MAAA,SAAQ2B,GAEDpC,KAAAA,IAAIqC,UAAU,KAAK3B,QAAS,KAAKE,MAAO,GACzC,KAAKA,MAAQ,MACVA,KAAAA,IAAM,GAERE,KAAAA,SAAW,KAAKE,YAChBD,KAAAA,SAAW,KAAKE,UACjB,KAAKF,UAAY,KAAKR,YAAc,MACjCU,KAAAA,UAAY,GAEbqB,IAAAA,EACHnC,KAAKoC,MAAM,KAAKrB,aAAe,KAAKC,eAAkB,IAEpDnB,KAAAA,IAAIqC,UACP,KAAKxB,UACLyB,EAHmB,EAKnB,IACA,IACA,KAAKxB,QACL,KAAKC,QACL,IACA,KAEGG,KAAAA,YAAc,KAAKA,YAAc,GAEtCK,OAAOK,sBAAsB,KAAKC,QAAQJ,KAAK,SAwCnD,CAAA,IAAA,OArCE,MAAA,cAqCF,CAAA,IAAA,gBAnCE,MAAA,SAAce,GACO,cAAfA,EAAMC,MACHzB,KAAAA,aAAe,EACfI,KAAAA,aAAasB,KAAK,cACC,eAAfF,EAAMC,MACVzB,KAAAA,YAAc,EACdI,KAAAA,aAAasB,KAAK,eACC,UAAfF,EAAMC,OACVxB,KAAAA,WAAa,KA2BxB,CAAA,IAAA,cAxBE,MAAA,SAAYuB,GACS,cAAfA,EAAMC,KACHrB,KAAAA,aAAe,KAAKA,aAAauB,OACpC,SAACC,GAASA,MAAS,cAATA,IAEY,eAAfJ,EAAMC,KACVrB,KAAAA,aAAe,KAAKA,aAAauB,OACpC,SAACC,GAASA,MAAS,eAATA,IAEY,UAAfJ,EAAMC,OACVxB,KAAAA,UAAY,GAEc,IAA7B,KAAKG,aAAayB,SACf7B,KAAAA,YAAc,KAWzB,CAAA,IAAA,WAPE,MAAA,WACS,MAAA,iEAAiE8B,KACtEC,UAAUC,eAKhB,EA7GMpD,GA6GN2B,OAAO0B,OAAS,WACRC,IAAAA,EAAM,IAAItD,EAChBuD,QAAQC,IAAIF,EAAIG","file":"app.63e013dc.js","sourceRoot":"../src","sourcesContent":["import forest from \"./forest.png\";\nimport run from \"./run.png\";\n\nclass App {\n  constructor() {\n    this.canvas = document.getElementById(\"app\");\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.stageWidth = Math.min(928, document.body.clientWidth);\n    this.stageHeight = Math.min(793, document.body.clientHeight);\n    // this.pixelRatio = window.devicePixelRatio > 1 ? 2 : 1;\n    this.pixelRatio = 1;\n\n    this.bgImage = new Image();\n    this.bgX = 0;\n    this.runSprite = new Image();\n    this.spriteX = -50;\n    this.spriteY = this.stageHeight - 162;\n    this.spriteSpeed = 0;\n    this.jumpDelta = 0;\n    this.spriteFrame = 0;\n    this.spriteMaxFrame = 8;\n    this.keyDownCodes = [];\n\n    this.load();\n    this.resize();\n    window.addEventListener(\"resize\", this.resize.bind(this), false);\n    window.addEventListener(\"keydown\", this.handleKeyDown.bind(this), false);\n    window.addEventListener(\"keyup\", this.handleKeyUp.bind(this), false);\n    window.requestAnimationFrame(this.animate.bind(this));\n  }\n\n  load() {\n    this.bgImage.src = forest;\n    this.runSprite.src = run;\n  }\n\n  resize() {\n    this.stageWidth = Math.min(928, document.body.clientWidth);\n    this.stageHeight = Math.min(793, document.body.clientHeight);\n\n    this.canvas.width = this.stageWidth * this.pixelRatio;\n    this.canvas.height = this.stageHeight * this.pixelRatio;\n    this.ctx.scale(this.pixelRatio, this.pixelRatio);\n  }\n\n  animate(t) {\n    // this.ctx.clearRect(0, 0, this.stageWidth, this.stageHeight);\n    this.ctx.drawImage(this.bgImage, this.bgX--, 0);\n    if (this.bgX <= -928) {\n      this.bgX = 0;\n    }\n    this.spriteX += this.spriteSpeed;\n    this.spriteY += this.jumpDelta;\n    if (this.spriteY === this.stageHeight - 162) {\n      this.jumpDelta = 0;\n    }\n    const targetFrameX =\n      (Math.floor(this.spriteFrame) % this.spriteMaxFrame) * 150;\n    const targetFrameY = 0;\n    this.ctx.drawImage(\n      this.runSprite,\n      targetFrameX,\n      targetFrameY,\n      150,\n      150,\n      this.spriteX,\n      this.spriteY,\n      150,\n      150\n    );\n    this.spriteFrame = this.spriteFrame + 0.2;\n\n    window.requestAnimationFrame(this.animate.bind(this));\n  }\n\n  jump() {}\n\n  handleKeyDown(event) {\n    if (event.code === \"ArrowLeft\") {\n      this.spriteSpeed = -2;\n      this.keyDownCodes.push(\"ArrowLeft\");\n    } else if (event.code === \"ArrowRight\") {\n      this.spriteSpeed = 2;\n      this.keyDownCodes.push(\"ArrowRight\");\n    } else if (event.code === \"Space\") {\n      this.jumpDelta = -2;\n    }\n  }\n  handleKeyUp(event) {\n    if (event.code === \"ArrowLeft\") {\n      this.keyDownCodes = this.keyDownCodes.filter(\n        (item) => item !== \"ArrowLeft\"\n      );\n    } else if (event.code === \"ArrowRight\") {\n      this.keyDownCodes = this.keyDownCodes.filter(\n        (item) => item !== \"ArrowRight\"\n      );\n    } else if (event.code === \"Space\") {\n      this.jumpDelta = 2;\n    }\n    if (this.keyDownCodes.length === 0) {\n      this.spriteSpeed = 0;\n    }\n  }\n\n  isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    );\n  }\n}\n\nwindow.onload = () => {\n  const app = new App();\n  console.log(app.isMobile());\n};\n"]}