{"version":3,"sources":["1/script.js","../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["console","log","width","window","innerWidth","height","innerHeight","canvas","document","getElementById","context","getContext","roads_canvas","createElement","roads_context","watercolor_canvas","watercolor_context","image","data","drawingId","boids","querySelector","addEventListener","e","clientX","clientY","push","Boid","Math","random","PI","setInterval","drawing","dist","x1","y1","x2","y2","sqrt","x","y","angle","gen","pow","dx","cos","dy","sin","stride","life","dead","hue","update","strokeStyle","beginPath","moveTo","lineTo","stroke","trail","color","h","s","l","lineWidth","i","px","py","index","floor","kill","splice","indexOf","bubbleFrequency","getImageData","length","boid","clearRect","globalAlpha","drawImage","clearInterval","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","module"],"mappings":"ACAA,ACAA,IDAIgF,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;;ADCA,ACCA,AFFA,SCCSZ,ACCAa,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDChB,MCCM,GDDX,ACCce,EDDE,ECCE,CAACE,SAAL,EAAd;ADAEjB,ADFJhF,ICEIgF,GDFG,CAAC/E,GAAR,CAAY,CCEC,GAAGiF,EDFhB,UCE4B,EAAxB;AACD,ACADc,AFDF,EECEA,EFDE9F,KECK,AFDA,CECCgG,EFDE/F,IECV,EFDgB,CECC,AFDAC,UAAnB,EEC+B;AAC3B2F,AFDJ,IECIA,AFDA1F,IECI,CAAC8F,CFDC,GAAGhG,EECT,IFDe,CAACG,WAApB;ACEE,ACAC,AFAH,GEFE,CFEEC,KCAKyE,CDAC,GAAGxE,KCAX,GDAmB,CAACC,cAAT,CAAwB,OAAxB,CAAb;ACCC,ADADF,MAAM,CAACL,KAAP,GAAeA,KAAf;AEAE8F,AFCFzF,EEDEyF,IFCI,CAAC3F,EEDE,CAAC+F,GFCV,CEDE,EFCc/F,CEDC0F,IAAI,CAACK,AFCtB,IEDiB,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCC,IAAI,CAACC,GAAL,EAA/C;ADEF,ACDER,AFCF,EEDEA,EFCErF,EEDE,CAAC8F,EDCEtB,EDAE,GAAG3E,GEDZ,CAAgBkG,EFCE,CCApB,ADAqB9F,GCAG,MCDtB,CAA6BqF,AFCjB,CAAkB,IAAlB,CAAd,CEDE,EAAsCD,IAAI,CAACW,WAA3C;ADEA,ACDD,AFED,IAAI9F,YAAY,GAAGJ,QAAQ,CAACK,aAAT,CAAuB,QAAvB,CAAnB;ACAE,ADCFD,MCDM,MDCM,CAACV,KAAb,GAAqBA,KAArB;ACAI,ACDJ,AFEAU,IEFI+F,MDCM,EDCE,CAACtG,CCDC8E,ACDA,GAAG,EDCP,ADCV,ECDI,ACDJ,CFEsB9E,MAAtB;ACAG,ADCH,GCHE,CAEE,ADCAS,OCDOsE,GAAP,EAAY,CDCC,GAAGxE,YAAY,CAACD,UAAb,CAAwB,IAAxB,CAApB;ACAI,ACFJ,AFIA,I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","file":"script.2ba6406e.js","sourceRoot":"../src","sourcesContent":["import \"./style.css\";\nconsole.log(\"load\");\n\nvar width = window.innerWidth;\nvar height = window.innerHeight;\n\nvar canvas = document.getElementById(\"world\");\ncanvas.width = width;\ncanvas.height = height;\nvar context = canvas.getContext(\"2d\");\n\nvar roads_canvas = document.createElement(\"canvas\");\nroads_canvas.width = width;\nroads_canvas.height = height;\nvar roads_context = roads_canvas.getContext(\"2d\");\n\nvar watercolor_canvas = document.createElement(\"canvas\");\nwatercolor_canvas.width = width;\nwatercolor_canvas.height = height;\nvar watercolor_context = watercolor_canvas.getContext(\"2d\");\n\nvar image, data;\nvar drawingId = -1;\nvar boids = [];\n\ndocument.querySelector(\"canvas#world\").addEventListener(\"click\", (e) => {\n  const { clientX, clientY } = e;\n  boids.push(\n    new Boid(clientX, clientY, (Math.random() * 180 * Math.PI) / 180, 0)\n  );\n  if (drawingId === -1) {\n    drawingId = setInterval(() => {\n      drawing(0.015);\n    }, 1000 / 60);\n  }\n});\n\n// functions\nvar dist = function (x1, y1, x2, y2) {\n  return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n};\n\nvar Boid = function (x, y, angle, gen) {\n  // 초기값 설정\n  // x, y : 그리기 시작점\n  // angle, dx, dy : 랜덤 설정된 각도에 따라 거리 1만큼 이동시키기 위한 x, y 델타값\n  // stride : 한 틱당 그릴 선분의 길이를 정하기 위한 보폭.\n  //        값이 클 수록 한 번에 길게 그리므로, 더 적은 틱으로 수행 가능하다.\n  // life, gen : 나중에 추가되는 자식일수록 gen이 높고, gen이 life보다 높으면 바로 kill()한다.\n  //            프랙탈 구조가 너무 좁게 들어가는 걸 방지함.\n  // dead : 계속 그릴지, 삭제할지를 판단하는 플래그\n  // dist : 시작점과 캔버스 중심과의 거리\n  // hue : 색상 관련\n\n  this.x = x;\n  this.y = y;\n  this.angle = Math.pow(Math.random(), 10) + angle;\n  this.dx = Math.cos(this.angle);\n  this.dy = Math.sin(this.angle);\n  this.stride = 2;\n  this.life = Math.random() * 30 + 10;\n  this.gen = gen;\n  this.dead = false;\n  this.dist = dist(this.x, this.y, width / 2, height / 2);\n  this.hue = Math.random() * 120;\n\n  // update함수가 실행되면서 선이 그려진다.\n\n  this.update = function () {\n    roads_context.strokeStyle = \"#808080\";\n    roads_context.beginPath();\n    roads_context.moveTo(this.x, this.y);\n\n    this.x += this.dx * this.stride;\n    this.y += this.dy * this.stride;\n\n    this.dist = dist(this.x, this.y, width / 2, height / 2);\n\n    roads_context.lineTo(this.x, this.y);\n    roads_context.stroke();\n\n    // trail : 음영 색 길이\n    // var trail = Math.random() * ((50 - 10) * ((this.dist / width) * 2)) + 10;\n    var trail = (Math.random() * Math.random() * 20 + 10) / 5;\n    var color = { h: this.hue, s: \"60%\", l: \"50%\" };\n    watercolor_context.strokeStyle =\n      \"hsla(\" + color.h + \",\" + color.s + \",\" + color.l + \",0.1)\";\n    watercolor_context.lineWidth = 2;\n    // trail은 한 번 그릴 때 5개씩 생기도록 함\n    for (var i = 0; i < 5; i++) {\n      watercolor_context.beginPath();\n      watercolor_context.moveTo(this.x, this.y);\n      var px = this.x + Math.cos(this.angle + 90) * (i * trail);\n      var py = this.y + Math.sin(this.angle + 90) * (i * trail);\n      watercolor_context.lineTo(px, py);\n      watercolor_context.stroke();\n    }\n\n    // index : 한 획을 그렸을 때, 펜이 떨어지는 위치의 좌표 값.\n    // ctx.getImageData.data 를 통해 얻어지는 1차원 행렬에 저장되어 있는 픽셀정보와 매핑됨\n    // 바로 직전의 drawing() 결과와 비교함.\n    // 픽셀정보 행렬에는 4개의 값이 하나의 픽셀을 표현함.\n    var index = (Math.floor(this.x) + width * Math.floor(this.y)) * 4;\n\n    // kill 조건\n    // 너무 세부적인 반복인 경우\n    if (this.gen >= this.life) this.kill();\n\n    // 펜을 뗀 픽셀의 알파가 0이 아닌 경우\n    if (data[index + 3] > 0) {\n      this.kill();\n    }\n\n    // 벽에 부딪힐 경우\n    if (this.x < 0 || this.x > width) this.kill();\n    if (this.y < 0 || this.y > height) this.kill();\n  };\n\n  // 배열에서 제거\n  this.kill = function () {\n    boids.splice(boids.indexOf(this), 1);\n    this.dead = true;\n  };\n};\n\nvar drawing = function (bubbleFrequency = 0.01) {\n  // 직전 틱의 canvas 상태를 가져온다.\n  image = roads_context.getImageData(0, 0, width, height);\n  data = image.data;\n  for (var i = 0; i < boids.length; i++) {\n    var boid = boids[i];\n    boid.update();\n    // 매 틱마다 2% 확률로 새로운 직선을 추가함.\n    // 완성된 직선에서 추가하는게 아니고 조금씩 그려가는 와중에 추가하는 것.\n    if (!boid.dead && Math.random() < bubbleFrequency && boids.length < 400) {\n      boids.push(\n        new Boid(\n          boid.x,\n          boid.y,\n          ((Math.random() > 0.5 ? 90 : -90) * Math.PI) / 180 + boid.angle,\n          boid.gen + 1\n        )\n      );\n    }\n  }\n  // 메인 캔버스에 그림을 그린다.\n  context.clearRect(0, 0, width, height);\n  context.globalAlpha = 0.5;\n  context.drawImage(watercolor_canvas, 0, 0);\n  context.globalAlpha = 1;\n  context.drawImage(roads_canvas, 0, 0);\n\n  if (boids.length == 0) {\n    clearInterval(drawingId);\n    drawingId = -1;\n    console.log(\"done\");\n  }\n};\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}